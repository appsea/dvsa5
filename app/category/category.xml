<Page
        class="page"
        navigatingTo="onNavigatingTo"
        xmlns="http://schemas.nativescript.org/tns.xsd">

    <ActionBar class="action-bar">
        <!--
        Use the NavigationButton as a side-drawer button in Android
        because ActionItems are shown on the right side of the ActionBar
        -->
        <NavigationButton ios:visibility="collapsed" icon="res://menu" tap="onDrawerButtonTap"></NavigationButton>
        <!--
        Use the ActionItem for IOS with position set to left. Using the
        NavigationButton as a side-drawer button in iOS is not possible,
        because its function is to always navigate back in the application.
        -->
        <Label class="action-bar-title">
            <label.formattedText>
                <formattedString>
                    <formattedString.spans>
                        <span text="Categories ("/>
                        <span text="{{ selected }}"/>
                        <span text="/"/>
                        <span text="{{ total }}"/>
                        <span text=")"/>
                    </formattedString.spans>
                </formattedString>
            </label.formattedText>
        </Label>
    </ActionBar>
    <DockLayout stretchLastChild="true">
        <StackLayout dock="top" height="20dpi" class="category-full-background">
        </StackLayout>
        <StackLayout dock="bottom" class="category-full-background">
            <StackLayout class="margin" orientation="horizontal" horizontalAlignment="center">
                <Button id="startButton" class="btn btn-login btn-rounded-sm font-weight-bold t-18" backgroundColor="#ffffff" text="Start" tap="start" margin="10dpi"
                        width="80%"/>
            </StackLayout>
            <StackLayout id="banner">
            </StackLayout>
        </StackLayout>
        <ScrollView id="scrollView" class="category-full-background">
            <StackLayout class="margin">
                <ListView id="categoryList" class="list-group" separatorColor="transparent" items="{{ categories }}"
                          itemTap="selectCategory" style="height:1250px">
                    <ListView.itemTemplate>
                        <GridLayout columns="auto, *, auto" class="{{ selected? 'transactions-list-item-selected m-5': 'transactions-list-item m-5'}}">
                            <StackLayout col="0" height="50" width="50" class="badge mr-10">
                                <Label text="{{ icon }}" class="fa c-white"></Label>
                            </StackLayout>
                            <StackLayout col="1" verticalAlignment="center">
                                <Label text="{{name}}" class="{{ attempted.length === questionNumbers.length && percentage > 40  ? 'category-complete-heading':'category-todo-heading' }}" textWrap="true"/>
                                <Label visibility="{{ attempted.length>0 ? 'visible' : 'collapsed' }}"
                                       class="category-stats">
                                    <label.formattedText>
                                        <formattedString>
                                            <formattedString.spans>
                                                <span text="{{attempted.length}}"/>
                                                <span text=" of "/>
                                                <span text="{{ questionNumbers.length }}"/>
                                                <span text=" Answered, "/>
                                                <span text=" {{ percentage }} "/>
                                                <span text="% Accuracy"/>
                                            </formattedString.spans>
                                        </formattedString>
                                    </label.formattedText>
                                </Label>
                                <Label visibility="{{ attempted.length===0 ? 'visible' : 'collapsed' }}"
                                       class="category-stats">
                                    <label.formattedText>
                                        <formattedString>
                                            <formattedString.spans>
                                                <span text=" Total "/>
                                                <span text="{{ questionNumbers.length }}"/>
                                                <span text=" Questions"/>
                                            </formattedString.spans>
                                        </formattedString>
                                    </label.formattedText>
                                </Label>
                            </StackLayout>
                            <Label col="2" text="&#xf058;" class="fa icon-selected" visibility="{{ selected ? 'visible' : 'collapsed' }}"/>
                        </GridLayout>
                    </ListView.itemTemplate>
                </ListView>
            </StackLayout>
        </ScrollView>
    </DockLayout>
</Page>